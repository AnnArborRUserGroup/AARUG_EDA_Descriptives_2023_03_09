---
title: "Tables in R for AARUG Presentation"
author: "Barry DeCicco"
date: "For Ann Arbor R Users' Group, Mar 9, 2023"
output:  
  html_document:
    toc:  true
    toc_float: true
    code_folding: show



  
---
```{r}

  # ioslides_presentation:
  #   template: quarterly-report.html

```

```{r setup,  collapse=TRUE}  

# load libraries as needed:
# 

library(pastecs)
# https://stats.idre.ucla.edu/r/faq/how-can-i-get-a-table-of-basic-descriptive-statistics-for-my-variables/

# For the gapminder data sets:
# install.packages("gapminder")

library(htmlTable)
library(psych)
library(tidyverse)
library(inspectdf)
library(janitor)

library(Hmisc)
library(summarytools)
library(readr)

# library(devtools)
# devtools::install_github("alastairrushworth/inspectdf")

library(inspectdf)   
# https://www.r-bloggers.com/part-2-simple-eda-in-r-with-inspectdf/
 
library(kableExtra)


library(gapminder)

```

## Import the Gapminder data set:


```{r import data, include=TRUE}


View(gapminder)

```

# Using Base R Commands to Inspect the Data Frame

This increases your knowledge of the data set, and catches import errors.

```{r eda, collapse=TRUE}
dim(gapminder)
class(gapminder)
lapply(gapminder, class)
sapply(gapminder, function(x) sum(is.na(x)))   
sapply(gapminder, function(x) sum(is.na(x)/length(x)))  
# https://sebastiansauer.github.io/sum-isna/
str(gapminder)
summary(gapminder)
head(gapminder)
tail(gapminder)

```


## The 'lapply' command can carry out a function across a list. A dataframe is a list of columns:

```{r}

lapply(gapminder, class)

```
### Sometimes you want to clean this up - use the <strong>kable</strong> command:


```{r lapply-class-kable}

gapminder %>%
  lapply(., class) %>%
  as.data.frame() %>%
  pivot_longer(cols=everything(),
               names_to='Variable',
               values_to='Type') %>%
  dplyr::arrange(Type, Variable ) %>%
  kable(caption = "<strong><center>Variable Classes</center></strong>", full_width = F) %>%
  # pack_rows(index = c("String Variable" = 4, "Date" = 1,
  #                     "Numeric" = 4)) %>%
  column_spec(1, width = "5cm", bold = T) %>%
  column_spec(2, width = "5cm") 


```



## Summary table using <strong>pastecs</strong> package:

```{r pastecs, collapse=TRUE}



# Set formatting options: 

options(scipen=100)
options(digits=2)

gapminder %>% 
  select_if(is.numeric) %>% 
  stat.desc()





```



## Summary table with fewer statistics:

```{r pastecs, collapse=TRUE}



# Set formatting options: 

options(scipen=100)
options(digits=2)

# Run a more limited set of statistics:

gapminder %>% 
  select_if(is.numeric) %>% 
  stat.desc(., basic=F)




```


## Tables using the kableExtra package:

#### https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html

#### The first table is run with base styling.

#### The second table is run with row striping, shorter row heights, and 'responsive' (with horizontal scrolling).


```{r describe_functions, collapse=TRUE}

# Set formatting options: 

options(scipen=100)
options(digits=2)

# Describe function from Hmisc:

Hmisc::describe(gapminder) 

# gapminder %>%
#   kable() %>%
#   kable_styling()



gapminder %>% 
  select_if(is.numeric) %>% 
  stat.desc(., basic=F)  %>% 
  kable() %>%
  kable_styling()


gapminder %>% 
  select_if(is.numeric) %>% 
  stat.desc(., basic=F)  %>% 
  kable() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))

# Run a more limited set of statistics:



```

```{r describe_by_group, collapse=TRUE}








```



